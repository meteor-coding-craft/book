# 29.3 웹 브라우저에서 리액티비티

지금까지 리액티비티의 원리에 대하여 직접 구현하면서 알아보았다. 그리고 스페이스바에서 어떻게 리액티비티가 동작하는지 "26.6 스페이스바의 리액티비티"에서도 알아보았다. 이번에는 리액티비티가 클라이언트에서 어떻게 동작하는지 좀 더 구체적으로 알아보자. 우선 다음 그림을 살펴보자.

![&#xADF8;&#xB9BC; 29-11 &#xD074;&#xB77C;&#xC774;&#xC5B8;&#xD2B8;&#xC5D0;&#xC11C;&#xC758; &#xB9AC;&#xC561;&#xD2F0;&#xBE44;](../.gitbook/assets/image%20%2831%29.png)

그림에서 클라이언트에서 리액티비티에 의한 DOM의 변경 동작 순서는 다음과 같다.

* 발행/구독에 따라 미니몽고의 데이터가 변화된다.
* 변화된 미니몽고의 데이터가 감지되어 템플릿 헬퍼가 DOM을 업데이트한다.
* 실제로 DOM이 변경된 부분만 업데이트된다.

미티어의 발행/구독 코드에 따라 서버에서 추가, 변경, 삭제된 데이터가 미니몽고에 실시간으로 반영된다. 템플릿 헬퍼는 이 변화를 감지하여 DOM을 업데이트한다. 이때 DOM 전체를 업데이트하지 않고 변화된 부분만 업데이트한다. 주소록의 경우 name 필드의 값이 바뀌었으면 name을 표현하는 td의 HTML 코드만 업데이트한다. 해당 리스트나 tr 요소 전체를 업데이트하지 않는다.

3장 주소록 만들기의 예제 코드에서 DOM 변경 동작 리액티비티 코드는 다음과 같다.

![&#xADF8;&#xB9BC; 29-12 &#xD074;&#xB77C;&#xC774;&#xC5B8;&#xD2B8;&#xC5D0;&#xC11C;&#xC758; &#xB9AC;&#xC561;&#xD2F0;&#xBE44;&#xD2F0; &#xCF54;&#xB4DC;](../.gitbook/assets/image%20%289%29.png)

일반적인 프로그램 방식처럼 사용자 이벤트 발생 시 서버에 데이터를 요청하고, 서버에서 데이터를 반환 받아 DOM을 업데이트하는 것과 달리, 미티어 클라이언트의 리액티비티는 미니몽고가 변경되면 해당 시점에 DOM을 업데이트하므로 실시간 프로그램을 작성하기가 쉽다. 또한, 미니몽고는 발행/구독에 의해 서버 데이터의 변경 사항을 지속적으로 반영하므로 몽고DB에서 DOM까지 실시간으로 반영되는 프로그램을 작성하기가 쉬워진다. 다음은 서버가 어떻게 몽고DB의 변화를 감지하는지 알아보자.

